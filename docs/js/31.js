(window.daoStyleJsonpFunction=window.daoStyleJsonpFunction||[]).push([[31],{200:function(n,e){n.exports="<template>\n  <div>\n    <h1>实时验证</h1>\n    <dao-editable-table :config=\"config\" v-model=\"model\" @valid=\"validChange1\"></dao-editable-table>\n    <button class=\"dao-btn blue\" @click=\"changeHeader\">添加一列</button>\n    <h1>非实时验证</h1>\n    <ul class=\"red\" v-for=\"th in validationMessage\" :key=\"th\">\n        <li>{{th}}</li>\n      </ul>\n    <dao-editable-table\n      :instantCheck=\"false\"\n      ref=\"EditableTable\"\n      :config=\"config\"\n      v-model=\"model\"\n      @valid=\"validChange2\"\n      @validation=\"validation\">\n      <template>\n        <dao-tooltip v-for=\"th in config.header\" :key=\"th\" :slot=\"th\" content=\"haha\" placement=\"top\">\n          <svg class=\"icon\"><use xlink:href=\"#icon_info-line\"></use></svg>\n        </dao-tooltip>\n      </template>\n    </dao-editable-table>\n    <button class=\"dao-btn blue\" @click=\"changeHeader\">添加一列</button>\n    <button class=\"dao-btn blue\" @click=\"onValidate\">触发验证</button>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      config: {\n        header: [\n          '变量 ID',\n          '变量名',\n          '类型',\n          '变量描述',\n          '是否必填',\n          '默认值',\n        ],\n        body: [{\n          type: 'input',\n          name: 'id',\n          default: '',\n          validate(row, all) {\n            if (row.id === '') {\n              return '变量 ID 不能为空';\n            }\n            if (all.filter(r => r.id === row.id).length > 1) {\n              return '变量 ID 不能重复';\n            }\n            return true;\n          },\n        },\n        {\n          type: 'input',\n          name: 'name',\n          default: '',\n          validate(row) {\n            if (row.name === '') {\n              return '变量名不能为空';\n            }\n            return true;\n          },\n        },\n        {\n          type: 'select',\n          name: 'type',\n          options: ['字符串', '布尔值', 'url', '密码', '文本'], // 此处具体的用法还要根据 select 而定\n          default: '字符串',\n        },\n        {\n          type: 'input',\n          name: 'description',\n          default: '',\n          validate(row) {\n            if (row.description === '') {\n              return '变量描述不能为空';\n            }\n            return true;\n          },\n        },\n        {\n          type: 'checkbox',\n          name: 'required',\n          default: true,\n          label: '必填',\n        },\n        {\n          type: 'input',\n          name: 'default',\n          placeholder: 'root',\n          validate(row) {\n            if (row.type === '布尔值' && row.default !== 'true' && row.default !== 'false') {\n              console.log('currentRow1', row);\n              return '默认值与类型不符';\n            }\n            if (row.type === 'url') {\n              const urlReg = /^(https?:\\/\\/)?[a-z0-9-]+(\\.[a-z0-9-]+)+\\.?(\\/.*)?$/i;\n              if (!urlReg.test(row.default)) {\n                console.log('currentRow2', row);\n                return '默认值与类型不符';\n              }\n            }\n            return true;\n          },\n        }],\n      },\n      model: [{\n        default: '',\n        description: 'The Root Password of MySQL',\n        id: 'mysql_root_password',\n        name: 'Root Password',\n        required: true,\n        type: '字符串',\n        placeholder: '此列不应显示，显示说明有 bug',\n      }],\n      validationMessage: [],\n    };\n  },\n  methods: {\n    validChange1(val) {\n      console.log('验证结果改变1', val);\n    },\n    validChange2(val) {\n      console.log('验证结果改变2', val);\n    },\n    changeHeader() {\n      this.config.header.push('最大值');\n      this.config.body.push({\n        type: 'input',\n        name: 'age',\n        default: 50,\n      });\n    },\n    onValidate() {\n      this.$refs.EditableTable.validate();\n    },\n    validation(value) {\n      this.validationMessage = value;\n    },\n  },\n  watch: {\n    model(newModel) {\n      console.log('model 已更新', newModel);\n    },\n  },\n};\n<\/script>\n<style lang=\"scss\" scoped>\n.dao-btn {\n  margin-top: 10px;\n}\n</style>"}}]);